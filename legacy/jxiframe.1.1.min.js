var intervalTimer,iFrameLoaded=!1,iFrameVisible=!1,impression=!1,cv=!1,eventURL=null;function getUrlParams(){var e={},t=window.location.href.match(/(\?|\&)([^=]+)\=([^&]+)/gi);return t&&t.length>0&&t.forEach(function(t,i){var r=t.replace(/[&\\?]/,"").split("=");e[r[0]]=r[1]}),e}function fireEvent(e){var t,i=eventURL+"&action="+e;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",i,!0),t.withCredentials=!0,t.crossDomain=!0,t.send()}window.jxiFrame||(window.jxiFrame={jxparams:null,jxstartiFrame:function(){params=getUrlParams();var e=null;params.creative&&(e=JSON.parse(atob(params.creative))),params.domain,params.pageurl,params.device,eventURL=e.trackers.baseurl+"?"+e.trackers.parameters;var t=e.url||null;this.jxiframeElement=document.createElement("iframe"),this.jxiframeElement.id="jxoutstreamiframe_"+Math.floor(1e5*Math.random())+1,this.jxiframeElement.onload=function(){iFrameLoaded=!0,parent.postMessage("jxhasad","*")},this.jxiframeElement.src=t,this.jxiframeElement.style.maxWidth="none !important",this.jxiframeElement.style.maxHeight="none !important",this.jxiframeElement.style.position="absolute",this.jxiframeElement.style.left="0",this.jxiframeElement.style.top="0",this.jxiframeElement.style.backgroundColor="transparent",this.jxiframeElement.style.border="none",this.jxiframeElement.style.width="100%",this.jxiframeElement.style.height="100%",this.jxiframeElement.setAttribute("frameborder","0"),this.jxiframeElement.setAttribute("scrolling","no"),this.jxiframeElement.setAttribute("allowTransparency","true"),document.getElementById("wrapper").appendChild(this.jxiframeElement)}},/comp|inter|loaded/.test(document.readyState)?window.jxoutstream.jxstartiFrame():document.addEventListener("DOMContentLoaded",window.jxiFrame.jxstartiFrame.bind(window.jxiFrame))),window.onmessage=function(e){"jxvisible"==e.data?(cv||(cv=!0,fireEvent("creativeView")),iFrameVisible=!0,intervalTimer=setInterval(function(){iFrameLoaded&&iFrameVisible&&!impression&&(fireEvent("impression"),impression=!0),impression&&clearInterval(intervalTimer)},2e3)):"jxnotvisible"==e.data&&(fireEvent("creativeHide"),iFrameVisible=!1)},window.focus(),window.addEventListener("blur",function(e){document.activeElement==document.querySelector("iframe")&&iFrameLoaded&&impression&&fireEvent("click")});