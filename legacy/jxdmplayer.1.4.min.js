var jxinter=null,jxutil={trackers:null,container:null,getUrlParams:function(e){var t={},a=e.match(/(\?|\&)([^=]+)\=([^&]+)/gi);return a&&a.length>0&&a.forEach(function(e,a){var i=e.replace(/[&\\?]/,"").split("=");t[i[0]]=i[1]}),t},newDiv:function(e,t,a,i,n){var r=document.createElement(t);return a&&""!=a&&(r.innerHTML=a),r.className=i,n&&(r.id=n),e.appendChild(r),r},acss:function(e,t){e.sheet.insertRule(t)},addListener:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},checkIframeLoaded:function(e,t,a,i){if(i){if("complete"==(e.contentDocument||e.contentWindow.document).readyState)return void t();window.setTimeout(a,300)}else e.onload=function(){t()}},setContainer:function(e){this.container=e},onWindowResize:function(e){this.container?parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:this.container.offsetHeight}}),"*"):parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:document.body.offsetHeight}}),"*")},setTrackers:function(e){this.trackers=e},onClick:function(){this.fire("click",null)},fire:function(e,t){if(this.trackers&&this.trackers.baseurl&&this.trackers.parameters){parent.postMessage("jxmsg::"+JSON.stringify({type:"event",params:{action:e}}),"*");var a,i="";if(this.trackers.baseurl)i=this.trackers.baseurl+"?"+this.trackers.parameters+"&action="+e,"click"==e&&t&&(i+="&clickid="+t),"error"==e&&t&&(i+="&errorcode="+t),(a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",i,!0),a.withCredentials=!0,a.crossDomain=!0,a.send()}}};window.dmAsyncInit=function(){DM.init({apiKey:"9892153f80b047306828",status:!0,cookie:!0}),onDMPlayerReady()},window.jxdm||(window.jxdm={dm:null,player:null,pparams:null,videolist:[],tdiv:null,auto:!1,wifi:!1,minWordLength:4,minWordSearch:2,maxWordSearch:10,sort:"relevance",searchParams:null,topBannerTag:null,bottomBannerTag:null,frameTag:null,hotspotTag:null,topBanner:null,bottomBanner:null,pframe:null,hotspots:null,v:!1,view:!1,isMobile:!1,p:!1,l:!1,r:!1,pu:null,pagetitle:null,imp:null,fPct:!1,mPct:!1,tPct:!1,start:!1,callbackReady:null,ready:function(){if("function"==typeof onDMPlayerReady){jxutil.addListener(window,"message",this.jxMsgIn);var e=document.createElement("script");e.async=!0,e.src="https://api.dmcdn.net/all.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}else console.log("JX WARNING: no handler function onDMPlayerReady defined, please check integration documentation.")},jxstartDM:function(e){if(e.trackers&&jxutil.setTrackers(e.trackers),e.container&&jxutil.setContainer(e.container),e.player&&(this.tdiv=e.player),e.pageurl&&(this.pu=e.pageurl),e.adparameters.topbanner&&(this.topBannerTag=e.adparameters.topbanner),e.adparameters.bottombanner&&(this.bottomBannerTag=e.adparameters.bottombanner),e.adparameters.frametag&&(this.frameTag=e.adparameters.frametag),e.adparameters.hotspotstag&&(this.hotspotTag=e.adparameters.hotspotstag),"mobile"==e.adparameters.network?this.wifi=!1:this.wifi=!0,e.callbackready&&(this.callbackReady=e.callbackready),e.adparameters?this.adparameters=e.adparameters:this.adparameters={},e.visible&&(this.v=e.visible),e.pagetitle&&(this.pagetitle=e.pagetitle.toLowerCase()),this.pagetitle&&void 0!==e.adparameters.excludewords&&e.adparameters.excludewords&&e.adparameters.excludewords.length>0){for(var t=e.adparameters.excludewords,a=0;a<t.length;a++)window.jxdm.pagetitle=window.jxdm.pagetitle.replace(t[a].toLowerCase(),"");this.pagetitle=this.pagetitle.replace(/ +(?= )/g,"").trim()}this.tdiv&&this.adparameters?(this.topBannerTag&&this.createAdSlot("top",this.topBannerTag),this.dm=jxutil.newDiv(this.tdiv,"div","","container"),this.bottomBannerTag&&this.createAdSlot("bottom",this.bottomBannerTag),this.pparams={controls:this.adparameters.controls||!0,ads_params:"contextual","ui-logo":!1,origin:e.domain||null,"queue-autoplay-next":!1,"queue-enable":!1},this.adparameters.syndication&&(this.pparams.syndication=this.adparameters.syndication),this.wifi&&"wifi"==this.adparameters.autoPlay?(this.auto=!0,this.pparams["autoplay-mute"]=!0):(this.auto=!1,this.pparams.autoplay=!1),this.adparameters.search&&"title"==this.adparameters.search&&this.pagetitle?(this.apisearch(this),window.addEventListener("onSearchEnd",e=>{window.jxdm.createPlayer(window.jxdm)})):this.adparameters.defaultPlaylist?(this.apiplaylist(this),window.addEventListener("onSearchEnd",e=>{window.jxdm.createPlayer(window.jxdm)})):this.adparameters.defaultVideo?(this.videolist.push({id:this.adparameters.defaultVideo}),this.createPlayer(this)):console.log("Warning: nothing to play in Dailymotion player")):console.log("JX WARNING - missing parameter: "+JSON.stringify(e))},jxMsgIn:function(e){try{"jxvisible"==e.data?(window.jxdm.v=!0,window.jxdm.view||(jxutil.fire("creativeView"),window.jxdm.view=!0),window.jxdm.l?!window.jxdm.p&&"none"!=window.jxdm.adparameters.autoPlay&&window.jxdm.r&&window.jxdm.wifi&&"wifi"==window.jxdm.adparameters.autoPlay&&(window.jxdm.player.play(),window.jxdm.p=!0):window.jxdm.LoadNextVideo()):"jxnotvisible"==e.data&&(window.jxdm.v=!1,window.jxdm.p&&(window.jxdm.player.pause(),window.jxdm.p=!1))}catch(e){console.log("Error when receiving message: "+e.message)}},createAdSlot:function(e,t){if(t.url){var a=null,i=document.createElement("a");i.href=t.url,-1!==i.pathname.indexOf(".png")||-1!==i.pathname.indexOf(".gif")||-1!==i.pathname.indexOf(".jpg")||-1!==i.pathname.indexOf(".jpeg")?((a=document.createElement("div")).innerHTML='<img src="'+t.url+'" width="100%" class="jxImg"/>',"top"==e?(this.topBanner=a,this.tdiv.parentNode.insertBefore(a,this.tdiv),t.clickurl&&jxutil.addListener(a,"click",this.onTopBannerClick)):"bottom"==e&&(this.bottomBanner=a,this.tdiv.parentNode.appendChild(a),t.clickurl&&jxutil.addListener(a,"click",this.onBottomBannerClick)),jxutil.addListener(a,"load",jxutil.onWindowResize)):((a=document.createElement("iframe")).src=t.url,a.className="adslot",a.style.border="none",a.setAttribute("frameborder","0"),a.setAttribute("scrolling","no"),"top"==e?(this.topBanner=a,this.tdiv.parentNode.insertBefore(a,this.tdiv),this.checkTopAdIframeLoaded()):"bottom"==e&&(this.bottomBanner=a,this.tdiv.parentNode.appendChild(this.bottomBanner),this.checkBottomAdIframeLoaded())),a.style.left="0",a.style.top="0",a.style.marginBottom="0px",a.style.marginTop="5px"}},checkTopAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxdm.topBanner,jxutil.onWindowResize,window.jxdm.checkTopAdIframeLoaded)},checkBottomAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxdm.bottomBanner,jxutil.onWindowResize,window.jxdm.checkBottomAdIframeLoaded)},onTopBannerClick:function(){window.jxdm.topBannerTag.clickurl&&(jxutil.fire("click","topbanner"),window.open(clickurl,"_blank"))},onBottomBannerClick:function(){window.jxdm.bottomBannerTag.clickurl&&(jxutil.fire("click","bottombanner"),window.open(clickurl,"_blank"))},sanitizeTitle:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()"]/g,"").split(" ").filter(e=>e.length>=this.minWordLength)},apiready:function(e){e.player.addEventListener("end",e.EventVideoEnd),e.player.addEventListener("error",e.EventVideoError),e.player.addEventListener("pause",e.EventVideoPause),e.player.addEventListener("start",e.EventVideoStart),e.player.addEventListener("playing",e.EventVideoPlay),e.player.addEventListener("timeupdate",e.EventVideoDuration),e.player.addEventListener("playback_ready",e.EventPlayBackReady),e.player.addEventListener("ad_start",e.EventAdStart),e.player.addEventListener("ad_end",e.EventAdEnd),e.initialisePlayer(e)},apisearch:function(e){e.searchParams||(e.searchParams={fields:"id,title",sort:this.sort,limit:10,search:e.sanitizeTitle(e.pagetitle).sort((e,t)=>t.length-e.length).slice(0,e.maxWordSearch).join(" ")},e.adparameters.searchInPlaylist||(e.searchParams.private=0),e.adparameters.searchInPlaylist||(e.searchParams.longer_than=.35),!e.adparameters.searchInPlaylist&&e.adparameters.owners&&(e.searchParams.owners=e.adparameters.owners),!e.adparameters.searchInPlaylist&&e.adparameters.category&&(e.searchParams.channel=e.adparameters.category),!e.adparameters.searchInPlaylist&&e.adparameters.excludeIds&&(e.searchParams.exclude_ids=e.adparameters.excludeIds),e.adparameters.language&&(e.searchParams.language=e.adparameters.language));var t=new Event("onSearchEnd");console.log("%c DM related ","background: #56C7FF; color: #232323","Search: "+JSON.stringify(e.searchParams)),DM.api("/"+(e.adparameters.searchInPlaylist?"playlist/"+e.adparameters.searchInPlaylist+"/videos":"videos"),e.searchParams,function(e){"list"in e&&e.list.length>0?(window.jxdm.videolist=e.list,window.dispatchEvent(t)):(window.jxdm.searchParams.search=window.jxdm.searchParams.search.substring(0,window.jxdm.searchParams.search.lastIndexOf(" ")),window.jxdm.searchParams.search.split(" ").length>=window.jxdm.minWordSearch?window.jxdm.apisearch(window.jxdm):window.jxdm.adparameters.defaultPlaylist?window.jxdm.apiplaylist(window.jxdm):window.jxdm.adparameters.defaultVideo?(window.jxdm.videolist.push({id:window.jxdm.adparameters.defaultVideo}),window.dispatchEvent(t)):console.log("Warning: nothing to play in Dailymotion player"))})},apiplaylist:function(e){var t=new Event("onSearchEnd");DM.api("/playlist/"+e.adparameters.defaultPlaylist+"/videos",{fields:"id,title",limit:20},function(e){"list"in e&&e.list.length>0?(window.jxdm.videolist=e.list,window.dispatchEvent(t)):window.jxdm.adparameters.defaultVideo?(window.jxdm.videolist.push({id:window.jxdm.adparameters.defaultVideo}),window.dispatchEvent(t)):console.log("Warning: nothing to play in Dailymotion player")})},createPlayer:function(e){try{if(e.videolist&&e.videolist.length>0){var t=e.videolist.shift();e.callbackReady(t);var a={width:"100%",height:"100%",video:t.id,params:e.pparams};e.player=DM.player(e.dm,a),e.player.addEventListener("apiready",e.apiready(e)),e.l=!0}else console.log("Warning: no video to play")}catch(e){console.log("Error when creating the player: "+e.message)}},initialisePlayer:function(e){e.player?(parent.postMessage("jxhasad","*"),e.adparameters.unMuteOnHover&&e.player.addEventListener("mouseover",()=>{window.jxdm.p&&window.jxdm.player.setMuted(!1)}),"strict"===e.adparameters.unMuteOnHover&&e.player.addEventListener("mouseout",()=>{window.jxdm.p&&window.jxdm.player.setMuted(!0)})):console.log("Warning, the Dailymotion player is not available")},LoadNextVideo:function(){try{if(window.jxdm.videolist&&window.jxdm.videolist.length>0){var e=window.jxdm.videolist.shift();window.jxdm.callbackReady(e),window.jxdm.auto?window.jxdm.player.load({video:e.id,"queue-enable":!0,"queue-autoplay-next":!0}):window.jxdm.player.load({video:e.id,autoplay:!0,"queue-enable":!0,"queue-autoplay-next":!0}),0==window.jxdm.videolist.length&&window.jxdm.adparameters.defaultPlaylist&&window.jxdm.apiplaylist(),window.jxdm.l=!0}}catch(e){console.log("Error when loading the next video: "+e.message)}},EventAdStart:function(e){jxutil.fire("padstart")},EventAdEnd:function(e){jxutil.fire("padend")},EventVideoEnd:function(e){window.jxdm.p&&(jxutil.fire("complete"),window.jxdm.fPct=!1,window.jxdm.mPct=!1,window.jxdm.tPct=!1,window.jxdm.imp=!1,window.jxdm.start=!1,window.jxdm.l=!1,window.jxdm.r=!1,window.jxdm.LoadNextVideo())},EventVideoError:function(e){e.code?jxutil.fire("error",e.code):jxutil.fire("error")},EventPlayBackReady:function(e){window.jxdm.r=!0,setTimeout(()=>{!window.jxdm.p&&"wifi"==window.jxdm.adparameters.autoPlay&&window.jxdm.wifi&&window.jxdm.v&&window.jxdm.player.play()},3e3)},EventVideoPause:function(e){window.jxdm.v&&jxutil.fire("pause"),window.jxdm.p=!1},EventVideoStart:function(e){},EventVideoPlay:function(e){try{window.jxdm.p=!0,window.jxdm.v?window.jxdm.start&&jxutil.fire("resume"):window.jxdm.player.pause()}catch(e){console.log("Error when receiving event play: "+e.message)}},EventVideoDuration:function(e){var t=e.target;if(parseFloat(t.currentTime)>0){!window.jxdm.start&&window.jxdm.v&&(jxutil.fire("start"),window.jxdm.start=!0,window.jxdm.auto?jxutil.fire("click","autoplay"):jxutil.fire("click","play")),parseFloat(t.currentTime)>2&&window.jxdm.v&&!window.jxdm.imp&&(jxutil.fire("impression"),window.jxdm.imp=!0);var a=(parseFloat(t.currentTime)||0)/parseFloat(t.duration);a>=.25&&!window.jxdm.fPct&&(jxutil.fire("firstQuartile"),window.jxdm.fPct=!0),a>=.5&&!window.jxdm.mPct&&(jxutil.fire("midpoint"),window.jxdm.mPct=!0),a>=.75&&!window.jxdm.tPct&&(jxutil.fire("thirdQuartile"),window.jxdm.tPct=!0)}}},/comp|inter|loaded/.test(document.readyState)?window.jxdm.ready():document.addEventListener("DOMContentLoaded",window.jxdm.ready.bind(window.jxdm)));