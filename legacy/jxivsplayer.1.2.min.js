var jxinter=null,jxutil={trackers:null,container:null,getUrlParams:function(t){var n={},e=t.match(/(\?|\&)([^=]+)\=([^&]+)/gi);return e&&0<e.length&&e.forEach(function(t,e){var i=t.replace(/[&\\?]/,"").split("=");n[i[0]]=i[1]}),n},newDiv:function(t,e,i,n,s){var o=document.createElement(e);return i&&""!=i&&(o.innerHTML=i),o.className=n,s&&(o.id=s),t.appendChild(o),o},acss:function(t,e){t.sheet.insertRule(e)},addListener:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},checkIframeLoaded:function(t,e,i,n){if(n){if("complete"==(t.contentDocument||t.contentWindow.document).readyState)return void e();window.setTimeout(i,300)}else t.onload=function(){e()}},setContainer:function(t){this.container=t},onWindowResize:function(t){this.container?parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:this.container.offsetHeight}}),"*"):parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:document.body.offsetHeight}}),"*")},setTrackers:function(t){this.trackers=t},onClick:function(){this.fire("click",null)},fire:function(t,e){if(this.trackers&&this.trackers.baseurl&&this.trackers.parameters){parent.postMessage("jxmsg::"+JSON.stringify({type:"event",params:{action:t}}),"*");var i,n="";if(this.trackers.baseurl)n=this.trackers.baseurl+"?"+this.trackers.parameters+"&action="+t,"click"==t&&e&&(n+="&clickid="+e),(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",n,!0),i.withCredentials=!0,i.crossDomain=!0,i.send()}}};window.jxivs||(window.jxivs={ivs:null,tdiv:null,topBannerTag:null,bottomBannerTag:null,frameTag:null,hotspotTag:null,topBanner:null,bottomBanner:null,pframe:null,hotspots:null,v:!1,pu:null,pt:null,key:null,wid:null,spid:null,imp:null,fPct:!1,mPct:!1,tPct:!1,start:!1,view:!1,callbackReady:null,ready:function(){"function"==typeof onIVSPlayerReady?onIVSPlayerReady():console.log("JX WARNING: no handler function onIVSPlayerReady defined, please check integration documentation.")},jxstartIVS:function(t){if(t.trackers&&jxutil.setTrackers(t.trackers),t.container&&jxutil.setContainer(t.container),t.player&&(this.tdiv=t.player),t.key&&(this.key=t.key),t.wid&&(this.wid=t.wid),t.spid&&(this.spid=t.spid),t.pageurl&&(this.pu=t.pageurl),t.pagetitle&&(this.pt=t.pagetitle),t.topbanner&&(this.topBannerTag=t.topbanner),t.bottombanner&&(this.bottomBannerTag=t.bottombanner),t.frametag&&(this.frameTag=t.frametag),t.hotspotstag&&(this.hotspotTag=t.hotspotstag),t.callbackready&&(this.callbackReady=t.callbackready),t.visible&&(this.v=t.visible),this.tdiv&&this.key&&this.wid&&this.spid){if(this.topBannerTag&&this.createAdSlot("top",this.topBannerTag),this.bottomBannerTag&&this.createAdSlot("bottom",this.bottomBannerTag),this.frameTag)jxcreateNewDiv(this.tdiv,"div",'<img src="'+this.frameTag+'" class="jxImg"/>',"container frameImg");this.ivs=document.createElement("iframe"),this.ivs.id="ivsplayer01",this.ivs.className="container",this.ivs.style.border="none",this.ivs.setAttribute("frameborder","0"),this.ivs.setAttribute("scrolling","no"),this.ivs.setAttribute("allow","autoplay; fullscreen");var e="https://player.ivideosmart.com/ivsplayer/v4/dist/html/iframe-src.html?lite=1";e+="&key="+this.key,e+="&wid="+this.wid,e+="&spid="+this.spid,this.pt?e+="&title="+this.pt:e+="&title=Jixie integration",e+="&url="+this.pu,this.ivs.src=e,this.tdiv.appendChild(this.ivs),this.checkPlayerIframeLoaded(),jxutil.addListener(window,"message",this.jxMsgIn),this.iLtnr()}else console.log("JX WARNING - missing parameter: "+JSON.stringify(t))},setPlayerParams:function(t){t.pageurl&&(this.pu=t.pageurl)},checkPlayerIframeLoaded:function(){window.jxivs.ivs||console.log("JX error - IVS iFrame undefined"),jxutil.checkIframeLoaded(window.jxivs.ivs,jxutil.onWindowResize,window.jxivs.checkPlayerIframeLoaded)},jxMsgIn:function(t){if("jxvisible"==t.data)window.jxivs.v=!0,window.jxivs.view||(jxutil.fire("creativeView"),window.jxivs.view=!0),window.jxivs.onScroll();else if("jxnotvisible"==t.data)window.jxivs.v=!1,window.jxivs.onScroll();else{var e="ivs.playersdk.message://";if("string"!=typeof event.data||0!==event.data.indexOf(e))return;var i=null;try{i=JSON.parse(event.data.substr(e.length))}catch(t){i=null}window.jxivs.onPlayerEvent(i.event,i.params)}},createAdSlot:function(t,e){if(e.url){var i=null,n=document.createElement("a");n.href=e.url,-1!==n.pathname.indexOf(".png")||-1!==n.pathname.indexOf(".gif")||-1!==n.pathname.indexOf(".jpg")||-1!==n.pathname.indexOf(".jpeg")?((i=document.createElement("div")).innerHTML='<img src="'+e.url+'" width="100%" class="jxImg"/>',"top"==t?(this.topBanner=i,this.tdiv.parentNode.insertBefore(i,this.tdiv),e.clickurl&&jxutil.addListener(i,"click",this.onTopBannerClick)):"bottom"==t&&(this.bottomBanner=i,this.tdiv.parentNode.appendChild(i),e.clickurl&&jxutil.addListener(i,"click",this.onBottomBannerClick)),jxutil.addListener(i,"load",jxutil.onWindowResize)):((i=document.createElement("iframe")).src=e.url,i.className="adslot",i.style.border="none",i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),"top"==t?(this.topBanner=i,this.tdiv.parentNode.insertBefore(i,this.tdiv),this.checkTopAdIframeLoaded()):"bottom"==t&&(this.bottomBanner=i,this.tdiv.parentNode.appendChild(this.bottomBanner),this.checkBottomAdIframeLoaded())),i.style.left="0",i.style.top="0",i.style.marginBottom="0px",i.style.marginTop="5px"}},checkTopAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxivs.topBanner,jxutil.onWindowResize,window.jxivs.checkTopAdIframeLoaded)},checkBottomAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxivs.bottomBanner,jxutil.onWindowResize,window.jxivs.checkBottomAdIframeLoaded)},onTopBannerClick:function(){window.jxivs.topBannerTag.clickurl&&(jxutil.fire("click","topbanner"),window.open(clickurl,"_blank"))},onBottomBannerClick:function(){window.jxivs.bottomBannerTag.clickurl&&(jxutil.fire("click","bottombanner"),window.open(clickurl,"_blank"))},onScroll:function(){var t=0;this.v||(t=600),this.sendMessageToPlayer("ivs.page.scroll",{pageYOffset:0,viewportHeight:500,containerTop:t,containerHeight:345}),this.sendMessageToPlayer("ivs.player.visible",{flag:this.v})},sendMessageToPlayer:function(t,e){var i="ivsplayer01",n=null;(n=window.AMP?document.querySelector("#"+i+" iframe"):document.querySelector("#"+i))&&n.contentWindow.postMessage("ivs.playersdk.message://"+JSON.stringify({event:t,params:e}),"*")},onPlayerEvent:function(t,e){switch(t){case"ivs.player.rendered":this.onScroll(),document.addEventListener("visibilitychange",function(t){document.hidden?window.jxivs.sendMessageToPlayer("ivs.player.visible",{flag:!1}):window.jxivs.onScroll()});break;case"ivs.content.ready":var i=e&&e.response&&e.response.body||null;i&&(this.callbackReady(i),parent.postMessage("jxhasad","*"));break;case"ivs.content.play":this.v&&!this.start?(jxutil.fire("start"),this.start=!0,this.ist.hCk?jxutil.fire("click","play"):jxutil.fire("click","autoplay")):this.v&&jxutil.fire("resume");break;case"ivs.content.pause":jxutil.fire("pause");break;case"ivs.content.ended":jxutil.fire("complete"),this.fPct=!1,this.mPct=!1,this.tPct=!1,this.imp=!1,this.start=!1;break;case"ivs.content.time":if(0<parseFloat(e.durationMs)){2e3<parseFloat(e.durationMs)&&window.jxivs.v&&!window.jxivs.imp&&(jxutil.fire("impression"),window.jxivs.imp=!0);var n=(parseFloat(e.positionMs)||0)/parseFloat(e.durationMs);.25<=n&&!this.fPct&&(jxutil.fire("firstQuartile"),this.fPct=!0),.5<=n&&!this.mPct&&(jxutil.fire("midpoint"),this.mPct=!0),.75<=n&&!this.tPct&&(jxutil.fire("thirdQuartile"),this.tPct=!0)}}},ist:{iOIF:!1,fB:!1,hFA:!1,hCk:!1},iLtnr:function(){this.bLtnr(),void 0!==window.attachEvent?(top.attachEvent("onblur",function(){window.jxivs.ist.fB=!0,window.jxivs.ist.hFA=!1,window.jxivs.onIFC()}),top.attachEvent("onfocus",function(){window.jxivs.ist.hFA=!0})):void 0!==window.addEventListener&&(top.addEventListener("blur",function(){window.jxivs.ist.fB=!0,window.jxivs.ist.hFA=!1,window.jxivs.onIFC()},!1),top.addEventListener("focus",function(){window.jxivs.ist.hFA=!0})),setInterval(this.bLtnr,500)},isFF:function(){return-1!==navigator.userAgent.search(/firefox/i)},isActElmtCh:function(){var t=document.activeElement.tagName.toUpperCase();document.activeElement.blur();var e=document.activeElement.tagName.toUpperCase();return!t.includes("BODY")&&e.includes("BODY")},onMOut:function(){!window.jxivs.ist.fB&&window.jxivs.isFF()&&window.jxivs.isActElmtCh()?window.jxivs.onClick():(document.activeElement.blur(),top.focus()),window.jxivs.ist.iOIF=!1},onMOver:function(){window.jxivs.ist.iOIF=!0},onIFC:function(){this.ist.hCk=!0,this.ist.iOIF&&this.onClick()},onClick:function(){},bLtnr:function(){window.jxivs.ivs.onmouseover=window.jxivs.onMOver,window.jxivs.ivs.onmouseout=window.jxivs.onMOut}},/comp|inter|loaded/.test(document.readyState)?window.jxivs.ready():document.addEventListener("DOMContentLoaded",window.jxivs.ready.bind(window.jxivs)));