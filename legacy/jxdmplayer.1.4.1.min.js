var jxinter=null,jxutil={trackers:null,container:null,getUrlParams:function(e){var a={},t=e.match(/(\?|\&)([^=]+)\=([^&]+)/gi);return t&&t.length>0&&t.forEach(function(e,t){var i=e.replace(/[&\\?]/,"").split("=");a[i[0]]=i[1]}),a},newDiv:function(e,a,t,i,n){var r=document.createElement(a);return t&&""!=t&&(r.innerHTML=t),r.className=i,n&&(r.id=n),e.appendChild(r),r},acss:function(e,a){e.sheet.insertRule(a)},addListener:function(e,a,t){e.addEventListener?e.addEventListener(a,t,!1):e.attachEvent?e.attachEvent("on"+a,t):e["on"+a]=t},checkIframeLoaded:function(e,a,t,i){if(i){if("complete"==(e.contentDocument||e.contentWindow.document).readyState)return void a();window.setTimeout(t,300)}else e.onload=function(){a()}},setContainer:function(e){this.container=e},onWindowResize:function(e){this.container?parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:this.container.offsetHeight}}),"*"):parent.postMessage("jxmsg::"+JSON.stringify({type:"size",params:{height:document.body.offsetHeight}}),"*")},setTrackers:function(e){this.trackers=e},onClick:function(){this.fire("click",null)},fire:function(e,a){if(this.trackers&&this.trackers.baseurl&&this.trackers.parameters){parent.postMessage("jxmsg::"+JSON.stringify({type:"event",params:{action:e}}),"*");var t,i="";if(this.trackers.baseurl)i=this.trackers.baseurl+"?"+this.trackers.parameters+"&action="+e,"click"==e&&a&&(i+="&clickid="+a),"error"==e&&a&&(i+="&errorcode="+a),(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",i,!0),t.withCredentials=!0,t.crossDomain=!0,t.send()}}};window.dmAsyncInit=function(){DM.init({apiKey:"9892153f80b047306828",status:!0,cookie:!0}),onDMPlayerReady()},window.jxdm||(window.jxdm={dm:null,player:null,pparams:null,videolist:[],tdiv:null,auto:!1,wifi:!1,minWordLength:4,minWordSearch:2,maxWordSearch:10,sort:"relevance",searchParams:null,topBannerTag:null,bottomBannerTag:null,frameTag:null,hotspotTag:null,topBanner:null,bottomBanner:null,pframe:null,hotspots:null,v:!1,view:!1,isMobile:!1,p:!1,l:!1,r:!1,pu:null,pagetitle:null,imp:null,fPct:!1,mPct:!1,tPct:!1,start:!1,callbackReady:null,ready:function(){if("function"==typeof onDMPlayerReady){jxutil.addListener(window,"message",this.jxMsgIn);var e=document.createElement("script");e.async=!0,e.src="https://api.dmcdn.net/all.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}else console.log("JX WARNING: no handler function onDMPlayerReady defined, please check integration documentation.")},jxstartDM:function(e){var a=this;if(e.trackers&&jxutil.setTrackers(e.trackers),e.container&&jxutil.setContainer(e.container),e.player&&(a.tdiv=e.player),e.pageurl&&(a.pu=e.pageurl),e.adparameters.topbanner&&(a.topBannerTag=e.adparameters.topbanner),e.adparameters.bottombanner&&(a.bottomBannerTag=e.adparameters.bottombanner),e.adparameters.frametag&&(a.frameTag=e.adparameters.frametag),e.adparameters.hotspotstag&&(a.hotspotTag=e.adparameters.hotspotstag),"mobile"==e.adparameters.network?a.wifi=!1:a.wifi=!0,e.callbackready&&(a.callbackReady=e.callbackready),e.adparameters?a.adparameters=e.adparameters:a.adparameters={},e.visible&&(a.v=e.visible),e.pagetitle&&(a.pagetitle=e.pagetitle.toLowerCase()),a.pagetitle&&void 0!==e.adparameters.excludewords&&e.adparameters.excludewords&&e.adparameters.excludewords.length>0){for(var t=e.adparameters.excludewords,i=0;i<t.length;i++)window.jxdm.pagetitle=window.jxdm.pagetitle.replace(t[i].toLowerCase(),"");a.pagetitle=a.pagetitle.replace(/ +(?= )/g,"").trim()}a.tdiv&&a.adparameters?(a.topBannerTag&&a.createAdSlot("top",a.topBannerTag),a.dm=jxutil.newDiv(a.tdiv,"div","","container"),a.bottomBannerTag&&a.createAdSlot("bottom",a.bottomBannerTag),a.pparams={controls:a.adparameters.controls||!0,ads_params:"contextual","ui-logo":!1,origin:e.domain||null,"queue-autoplay-next":!1,"queue-enable":!1},a.adparameters.syndication&&(a.pparams.syndication=a.adparameters.syndication),a.wifi&&"wifi"==a.adparameters.autoPlay?(a.auto=!0,a.pparams["autoplay-mute"]=!0):(a.auto=!1,a.pparams.autoplay=!1),e.container&&(e.container.addEventListener("jxvisible",function(e){a.onVisible(a)}),e.container.addEventListener("jxnotvisible",function(e){a.onNotVisible(a)})),a.adparameters.search&&"title"==a.adparameters.search&&a.pagetitle?(a.apisearch(a),window.addEventListener("onSearchEnd",e=>{window.jxdm.createPlayer(window.jxdm)})):a.adparameters.defaultPlaylist?(a.apiplaylist(a),window.addEventListener("onSearchEnd",e=>{window.jxdm.createPlayer(window.jxdm)})):a.adparameters.defaultVideo?(a.videolist.push({id:a.adparameters.defaultVideo}),a.createPlayer(a)):console.log("Warning: nothing to play in Dailymotion player")):console.log("JX WARNING - missing parameter: "+JSON.stringify(e))},jxMsgIn:function(e){try{"jxvisible"==e.data?window.jxdm.onVisible(window.jxdm):"jxnotvisible"==e.data&&window.jxdm.onNotVisible(window.jxdm)}catch(e){console.log("Error when receiving message: "+e.message)}},onVisible:function(e){e.v=!0,e.view||(jxutil.fire("creativeView"),e.view=!0),e.l?!e.p&&"none"!=e.adparameters.autoPlay&&e.r&&e.wifi&&"wifi"==e.adparameters.autoPlay&&(e.player.play(),e.p=!0):e.LoadNextVideo()},onNotVisible:function(e){e.v=!1,e.p&&(e.player.pause(),e.p=!1)},onFloat:function(e){},onDocked:function(e){},onFloatClose:function(e){},createAdSlot:function(e,a){if(a.url){var t=null,i=document.createElement("a");i.href=a.url,-1!==i.pathname.indexOf(".png")||-1!==i.pathname.indexOf(".gif")||-1!==i.pathname.indexOf(".jpg")||-1!==i.pathname.indexOf(".jpeg")?((t=document.createElement("div")).innerHTML='<img src="'+a.url+'" width="100%" class="jxImg"/>',"top"==e?(this.topBanner=t,this.tdiv.parentNode.insertBefore(t,this.tdiv),a.clickurl&&jxutil.addListener(t,"click",this.onTopBannerClick)):"bottom"==e&&(this.bottomBanner=t,this.tdiv.parentNode.appendChild(t),a.clickurl&&jxutil.addListener(t,"click",this.onBottomBannerClick)),jxutil.addListener(t,"load",jxutil.onWindowResize)):((t=document.createElement("iframe")).src=a.url,t.className="adslot",t.style.border="none",t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),"top"==e?(this.topBanner=t,this.tdiv.parentNode.insertBefore(t,this.tdiv),this.checkTopAdIframeLoaded()):"bottom"==e&&(this.bottomBanner=t,this.tdiv.parentNode.appendChild(this.bottomBanner),this.checkBottomAdIframeLoaded())),t.style.left="0",t.style.top="0",t.style.marginBottom="0px",t.style.marginTop="5px"}},checkTopAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxdm.topBanner,jxutil.onWindowResize,window.jxdm.checkTopAdIframeLoaded)},checkBottomAdIframeLoaded:function(){jxutil.checkIframeLoaded(window.jxdm.bottomBanner,jxutil.onWindowResize,window.jxdm.checkBottomAdIframeLoaded)},onTopBannerClick:function(){window.jxdm.topBannerTag.clickurl&&(jxutil.fire("click","topbanner"),window.open(clickurl,"_blank"))},onBottomBannerClick:function(){window.jxdm.bottomBannerTag.clickurl&&(jxutil.fire("click","bottombanner"),window.open(clickurl,"_blank"))},sanitizeTitle:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()"]/g,"").split(" ").filter(e=>e.length>=this.minWordLength)},apiready:function(e){e.player.addEventListener("end",e.EventVideoEnd),e.player.addEventListener("error",e.EventVideoError),e.player.addEventListener("pause",e.EventVideoPause),e.player.addEventListener("start",e.EventVideoStart),e.player.addEventListener("playing",e.EventVideoPlay),e.player.addEventListener("timeupdate",e.EventVideoDuration),e.player.addEventListener("playback_ready",e.EventPlayBackReady),e.player.addEventListener("ad_start",e.EventAdStart),e.player.addEventListener("ad_end",e.EventAdEnd),e.initialisePlayer(e)},apisearch:function(e){e.searchParams||(e.searchParams={fields:"id,title",sort:this.sort,limit:10,search:e.sanitizeTitle(e.pagetitle).sort((e,a)=>a.length-e.length).slice(0,e.maxWordSearch).join(" ")},e.adparameters.searchInPlaylist||(e.searchParams.private=0),e.adparameters.searchInPlaylist||(e.searchParams.longer_than=.35),!e.adparameters.searchInPlaylist&&e.adparameters.owners&&(e.searchParams.owners=e.adparameters.owners),!e.adparameters.searchInPlaylist&&e.adparameters.category&&(e.searchParams.channel=e.adparameters.category),!e.adparameters.searchInPlaylist&&e.adparameters.excludeIds&&(e.searchParams.exclude_ids=e.adparameters.excludeIds),e.adparameters.language&&(e.searchParams.language=e.adparameters.language));var a=new Event("onSearchEnd");console.log("%c DM related ","background: #56C7FF; color: #232323","Search: "+JSON.stringify(e.searchParams)),DM.api("/"+(e.adparameters.searchInPlaylist?"playlist/"+e.adparameters.searchInPlaylist+"/videos":"videos"),e.searchParams,function(e){"list"in e&&e.list.length>0?(window.jxdm.videolist=e.list,window.dispatchEvent(a)):(window.jxdm.searchParams.search=window.jxdm.searchParams.search.substring(0,window.jxdm.searchParams.search.lastIndexOf(" ")),window.jxdm.searchParams.search.split(" ").length>=window.jxdm.minWordSearch?window.jxdm.apisearch(window.jxdm):window.jxdm.adparameters.defaultPlaylist?window.jxdm.apiplaylist(window.jxdm):window.jxdm.adparameters.defaultVideo?(window.jxdm.videolist.push({id:window.jxdm.adparameters.defaultVideo}),window.dispatchEvent(a)):console.log("Warning: nothing to play in Dailymotion player"))})},apiplaylist:function(e){var a=new Event("onSearchEnd");DM.api("/playlist/"+e.adparameters.defaultPlaylist+"/videos",{fields:"id,title",limit:20},function(e){"list"in e&&e.list.length>0?(window.jxdm.videolist=e.list,window.dispatchEvent(a)):window.jxdm.adparameters.defaultVideo?(window.jxdm.videolist.push({id:window.jxdm.adparameters.defaultVideo}),window.dispatchEvent(a)):console.log("Warning: nothing to play in Dailymotion player")})},createPlayer:function(e){try{if(e.videolist&&e.videolist.length>0){var a=e.videolist.shift();e.callbackReady(a);var t={width:"100%",height:"100%",video:a.id,params:e.pparams};e.player=DM.player(e.dm,t),e.player.addEventListener("apiready",e.apiready(e)),e.l=!0}else console.log("Warning: no video to play")}catch(e){console.log("Error when creating the player: "+e.message)}},initialisePlayer:function(e){e.player?(parent.postMessage("jxhasad","*"),jxutil.container.dispatchEvent(new Event("jxhasad")),e.adparameters.unMuteOnHover&&e.player.addEventListener("mouseover",()=>{window.jxdm.p&&window.jxdm.player.setMuted(!1)}),"strict"===e.adparameters.unMuteOnHover&&e.player.addEventListener("mouseout",()=>{window.jxdm.p&&window.jxdm.player.setMuted(!0)})):console.log("Warning, the Dailymotion player is not available")},LoadNextVideo:function(){try{if(window.jxdm.videolist&&window.jxdm.videolist.length>0){var e=window.jxdm.videolist.shift();window.jxdm.callbackReady(e),window.jxdm.auto?window.jxdm.player.load({video:e.id,"queue-enable":!0,"queue-autoplay-next":!0}):window.jxdm.player.load({video:e.id,autoplay:!0,"queue-enable":!0,"queue-autoplay-next":!0}),0==window.jxdm.videolist.length&&window.jxdm.adparameters.defaultPlaylist&&window.jxdm.apiplaylist(),window.jxdm.l=!0}}catch(e){console.log("Error when loading the next video: "+e.message)}},EventAdStart:function(e){jxutil.fire("padstart")},EventAdEnd:function(e){jxutil.fire("padend")},EventVideoEnd:function(e){window.jxdm.p&&(jxutil.fire("complete"),window.jxdm.fPct=!1,window.jxdm.mPct=!1,window.jxdm.tPct=!1,window.jxdm.imp=!1,window.jxdm.start=!1,window.jxdm.l=!1,window.jxdm.r=!1,window.jxdm.LoadNextVideo())},EventVideoError:function(e){e.code?jxutil.fire("error",e.code):jxutil.fire("error")},EventPlayBackReady:function(e){window.jxdm.r=!0,setTimeout(()=>{!window.jxdm.p&&"wifi"==window.jxdm.adparameters.autoPlay&&window.jxdm.wifi&&window.jxdm.v&&window.jxdm.player.play()},3e3)},EventVideoPause:function(e){window.jxdm.v&&jxutil.fire("pause"),window.jxdm.p=!1},EventVideoStart:function(e){},EventVideoPlay:function(e){try{window.jxdm.p=!0,window.jxdm.v?window.jxdm.start&&jxutil.fire("resume"):window.jxdm.player.pause()}catch(e){console.log("Error when receiving event play: "+e.message)}},EventVideoDuration:function(e){var a=e.target;if(parseFloat(a.currentTime)>0){!window.jxdm.start&&window.jxdm.v&&(jxutil.fire("start"),window.jxdm.start=!0,window.jxdm.auto?jxutil.fire("click","autoplay"):jxutil.fire("click","play")),parseFloat(a.currentTime)>2&&window.jxdm.v&&!window.jxdm.imp&&(jxutil.fire("impression"),window.jxdm.imp=!0);var t=(parseFloat(a.currentTime)||0)/parseFloat(a.duration);t>=.25&&!window.jxdm.fPct&&(jxutil.fire("firstQuartile"),window.jxdm.fPct=!0),t>=.5&&!window.jxdm.mPct&&(jxutil.fire("midpoint"),window.jxdm.mPct=!0),t>=.75&&!window.jxdm.tPct&&(jxutil.fire("thirdQuartile"),window.jxdm.tPct=!0)}}},/comp|inter|loaded/.test(document.readyState)?window.jxdm.ready():document.addEventListener("DOMContentLoaded",window.jxdm.ready.bind(window.jxdm)));