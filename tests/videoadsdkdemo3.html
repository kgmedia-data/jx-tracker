<!DOCTYPE html>
<html>
	<head>
		<title>JX Video Ad Player Test</title>
		<meta name='ad.size' content='width=640,height=360'>
		<meta charset='UTF-8'>
		<style>body { background-color:rgba(255,255,255,1)}
		</style>
	</head>
	<body style='margin:0; padding:0;'>
        <div>
            <p>Example click play, playing randomly videos from an array of videos and with an ad tag provided.</p>
        </div>
		<div class="bn_outter_container preloader fallback" style="position:relative;">
			<div id="bn_main_canvas" class="bn_main" style='position:relative;'>
				<div class="_container" data-parent-id="component-0">
					<!-- <div id="playerContainer" class="trans-text-item" style="position:absolute; display: block;">
					</div>-->
                    <div id="playerContainer" style="position:relative; display: block;width: 60%; padding-top:56%">
                        <div id="playerContainer1" style="position:absolute; top:0px; bottom:0px; left:0px; right:0px">    
                        </div>
                      </div>
				</div>
			</div>
		</div>

    	<script>
    		var myplayer = null; // to get a global variable with the player used in the subsequent sequence
    		var hasplayed = false; // indicates if we already played a video. If yes we launch automatically the second video and so on

    		var videos = [
    			"https://archive.org/download/WildlifeSampleVideo/Wildlife.mp4",
    			"https://archive.org/download/SampleVideo1280x7205mb/SampleVideo_1280x720_5mb.mp4",
    		];

    		// Function to use to set the video player parameters
    		function onJXPlayerReady(jx){
    			console.log("calling onJXPlayerReady");
    			myplayer = jx;
    			var p={
    				    container: "playerContainer1",
            			domain: "jixie.io",
            			tag: "https://ad.jixie.io/v1/video?source=outstream&domain=jixie.io&unit=none&pageurl=https%3A%2F%2Funiversal.jixie.io%2Fdemos%2Fportal%2Fhybrid.html%3Fcreativeid%3D38&device=desktop&creativeid=23",
            			video: videos[Math.floor(Math.random() * videos.length)], // we select a random video
    			};
    			myplayer.start(p);

	    		// Event listeners: 
	    		window.addEventListener('jxhasad', readyToPlay);
	    		window.addEventListener('jxnoad', readyToPlay);
	    		window.addEventListener('jxadended', function(e){console.log("Ad fully played")});
                window.addEventListener('jxplayvideo', function(e){
                                                            hasplayed = true; 
                                                            console.log("We start the video")
                                                        });
	    		window.addEventListener('jxvideoend', whenVideoEndsWeRestart);
	    		window.addEventListener('jxadstart', function(e){console.log("Ad start");});
	    		window.addEventListener('jxadfirstQuartile', function(e){console.log("Ad first quartile");});
	    		window.addEventListener('jxadmidpoint', function(e){console.log("Ad midpoint");});
	    		window.addEventListener('jxadthirdQuartile', function(e){console.log("Ad third quartile");});
	    		window.addEventListener('jxadalladscompleted', function(e){console.log("Ad Ended");});
	    		window.addEventListener('jxadclick', function(e){console.log("Ad click");});
	    		window.addEventListener('jxadimpression', function(e){console.log("Ad impression");});
    		}

    		function readyToPlay(){
    			//if (!hasplayed) 
				myplayer.play(); // if there is an ad it will display the ad, otherwise the video directly or the image depending on the configuration
    		}

    		// With this function we restart the process. Note that we cannot change the tag called, otherwise it generates 
    		// a cross domain call error. The best is to define a campaign specifically for the player. However we can change the URL of the video.
    		function whenVideoEndsWeRestart(){
    			console.log("Jx video end");
				var p={
    				    container: "playerContainer1",
            			domain: "jixie.io",
            			tag: "https://ad.jixie.io/v1/video?source=outstream&domain=jixie.io&unit=none&pageurl=https%3A%2F%2Funiversal.jixie.io%2Fdemos%2Fportal%2Fhybrid.html%3Fcreativeid%3D38&device=desktop&creativeid=23",
            			video: videos[Math.floor(Math.random() * videos.length)], // we select a random video
    			};
    			//var p={
            	//		video: videos[Math.floor(Math.random() * videos.length)],
    			//};
    			myplayer.start(p);
    		}
    	</script>
	    <script type="text/javascript" src="https://scripts.jixie.io/jxvideoad.1.0.min.js"></script>

	</body>
</html>